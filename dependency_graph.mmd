graph LR
subgraph Client Layer
    A[Web/Mobile Apps]
end
subgraph API Gateway Layer
    B((API Gateway))
end
subgraph Core Services Layer
    C{Product Service}
    D{User Service}
    E{Order Service}
end
subgraph Database Layer
    F[Product Database]
    G[User Database]
    H[Order Database]
end
subgraph Message Broker
    I[Message Queue]
end
A --> B
B --> C
B --> D
C --> F
D --> G
C -.-> I
D -.-> I
I --> E
E --> H
subgraph External Services
    J[Payment Gateway]
end
E --> J

style C fill:#ccf,stroke:#333,stroke-width:2px
style D fill:#ccf,stroke:#333,stroke-width:2px
style E fill:#ccf,stroke:#333,stroke-width:2px
style F fill:#ccf,stroke:#333,stroke-width:2px
style G fill:#ccf,stroke:#333,stroke-width:2px
style H fill:#ccf,stroke:#333,stroke-width:2px
style I fill:#ccf,stroke:#333,stroke-width:2px
style J fill:#ccf,stroke:#333,stroke-width:2px

